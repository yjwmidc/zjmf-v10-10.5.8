<!-- 页面独有样式 -->
<link rel="stylesheet" href="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/css/mf_cloud.css">
<div class="template">
  <!-- 自己的东西 -->
  <h1 class="tit">{{tit}}</h1>
  <div class="main-card mf-cloud" v-loading="loadingPrice && isInit">
    <el-tabs v-model="activeName" @tab-click="handleClick" class="top-tab">
      <!-- 快速配置 -->
      <el-tab-pane :label="lang.fast_config" name="fast" v-if="isUpdate ? activeName === 'fast' : showFast">
        <div class="con">
          <p class="com-tit">{{lang.basic_config}}</p>
          <el-form :model="params" :rules="rules" ref="orderForm" label-position="left" label-width="130px"
            hide-required-asterisk class="fast-form">
            <el-form-item :label="lang.common_cloud_label1">
              <el-tabs v-model="country" @tab-click="changeCountry" :class="{hide: dataList.length === 1}"
                class="area-tab">
                <el-tab-pane :label="item.name" :name="String(item.id)" v-for="item in dataList" :key="item.id">
                  <el-radio-group v-model="city" @input="changeCity($event,item.city)" class="area-radio">
                    <el-radio-button :label="c.name" v-for="(c,cInd) in item.city" :key="cInd">
                      <img :src="`/upload/common/country/${item.iso}.png`" alt="" class="country-icon">
                      {{c.name}}
                    </el-radio-button>
                  </el-radio-group>
                </el-tab-pane>
              </el-tabs>
              <!-- <p class="s-tip">{{lang.mf_tip1}}&nbsp;<span>{{lang.mf_tip2}}</span>{{lang.mf_tip3}}</p> -->
            </el-form-item>
            <!-- 套餐 -->
            <p class="com-tit">{{lang.package_config}}</p>
            <el-form-item :label="lang.common_cloud_text7">
              <div class="cloud-box area-radio" v-if="recommendList.length > 0">
                <div class="cloud-item el-radio-button" :class="{'is-active': index=== cloudIndex}"
                  v-for="(item,index) in recommendList" :key="index" @click="changeRecommend(item,index)">
                  <el-tooltip class="item" effect="dark" :content="item.description" placement="top-end"
                    popper-class="com-bottom-tooltip des">
                    <div class="inner">
                      <div class="top">
                        {{item.name}}
                      </div>
                      <div class="info">
                        <p><span class="name">{{lang.mf_specs}}：</span>{{item.cpu}}{{lang.mf_cores}}{{item.memory}}G</p>
                        <p><span class="name">{{lang.mf_system}}：</span>{{item.system_disk_size}}GB<span
                            v-if="item.system_disk_type">，{{item.system_disk_type}}</span></p>
                        <p v-if="item.data_disk_size * 1">
                          <span class="name">{{lang.common_cloud_text1}}：</span>{{item.data_disk_size}}GB<span
                            v-if="item.data_disk_type">，{{item.data_disk_type}}</span>
                        </p>
                        <p v-if="item.bw"><span class="name">{{lang.mf_bw}}：</span>{{item.bw}}M</p>
                        <template v-else>
                          <p v-if="item.flow"><span class="name">{{lang.mf_flow}}：</span>{{item.flow}}GB</p>
                          <p v-if="item.flow===0"><span class="name">{{lang.mf_flow}}：</span>{{lang.mf_tip28}}</p>
                        </template>
                        <p v-if="baseConfig.free_disk_switch">
                          <span class="name">{{lang.mf_tip37}}：</span>
                          {{baseConfig.free_disk_size}}GB
                        </p>
                        <p v-if="item.peak_defence">
                          <span class="name">{{lang.peak_defence}}：</span>{{ item.peak_defence + 'G'}}
                        </p>
                        <p><span
                            class="name">IP{{lang.shoppingCar_goodsNums}}：</span>{{item.ip_num}}{{lang.common_cloud_title43}}
                        </p>
                        <p v-if="item.gpu_num"><span class="name">GPU{{lang.shoppingCar_goodsNums}}：</span>
                          <span :title="`${item.gpu_num}*${item.gpu_name}`">{{item.gpu_num}}*{{item.gpu_name}}</span>
                        </p>
                      </div>
                    </div>
                  </el-tooltip>
                  <p class="no-up" v-if="item.upgrade_range === 0 && baseConfig.no_upgrade_tip_show === 1">
                    <el-tooltip class="item" effect="dark" :content="lang.no_upgrade" placement="right"
                      popper-class="com-bottom-tooltip">
                      <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/mf_cloud/no-upgrade.svg"
                        alt="">
                    </el-tooltip>
                  </p>
                </div>
              </div>
              <div class="empty" v-else>
                {{lang.mf_tip9}}
              </div>
            </el-form-item>

            <!-- 镜像 -->
            <el-form-item :label="lang.cloud_menu_5" class="image" id="image">
              <div class="image-box">
                <el-select v-model="curImageId" popper-class="image-select" @change="changeImage">
                  <template slot="prefix">
                    <img
                      :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/mf_cloud/${curImageIcon}.svg`"
                      alt="" class="image-icon" v-if="curImageIcon" />
                  </template>
                  <el-option v-for="item in imageList" :key="item.id" :label="item.name" :value="item.id">
                    <img
                      :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/mf_cloud/${item.icon}.svg`"
                      alt="" class="image-icon" />
                    <span>{{item.name}}</span>
                  </el-option>
                </el-select>
                <el-select v-model="params.image_id" popper-class="image-select" @change="getCycleList">
                  <el-option v-for="item in calcImageList" :key="item.id" :label="item.name" :value="item.id">
                  </el-option>
                </el-select>
              </div>
              <!-- <p class="s-tip" v-if="imageName">{{imageName && (imageName.indexOf('Win') !== -1 ? lang.mf_tip26 :
                lang.mf_tip27)}}
              </p> -->
              <span class="error-tip" v-show="showImage">{{lang.mf_tip6}}</span>
            </el-form-item>

            <!-- 网络配置 -->
            <p class="com-tit" v-if="baseConfig.type === 'host'">{{lang.net_config}}</p>
            <el-form-item :label="lang.network_type" v-if="baseConfig.type === 'host'">
              <el-radio-group v-model="netName" @change="changeNet" class="area-radio">
                <el-radio-button :label="lang.mf_normal" v-if="baseConfig.support_normal_network">
                  <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/classical.svg`"
                    alt="" class="small-icon">
                  {{lang.mf_normal}}
                </el-radio-button>
                <el-radio-button :label="lang.mf_vpc" v-if="baseConfig.support_vpc_network">
                  <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/vpc.svg`"
                    alt="" class="small-icon">
                  {{lang.mf_vpc}}
                </el-radio-button>
              </el-radio-group>
            </el-form-item>
            <template v-if="params.network_type === 'vpc'">
              <el-form-item :label="lang.cloud_menu_2"
                v-if="params.nat_web_limit_enable || params.nat_acl_limit_enable">
                <span style="display: inline-block;line-height: .48rem;">172.16.0.0/12</span>
              </el-form-item>
              <el-form-item :label="lang.cloud_menu_2" v-else>
                <div class="choose-net">
                  <el-select v-model="params.vpc.id" filterable class="w-select"
                    :placeholder="`${lang.placeholder_pre2}${lang.cloud_menu_2}`">
                    <el-option value="" :label="lang.create_network"></el-option>
                    <el-option v-for="item in vpcList" :key="item.id" :label="item.name" :value="item.id">
                    </el-option>
                  </el-select>
                  <i class="el-icon-loading" v-show="vpcLoading"></i>
                  <i class="el-icon-refresh" class="refresh" @click="getVpcList" v-show="!vpcLoading"></i>
                </div>
                <div class="vpc" v-if="params.vpc.id === ''">
                  <el-select v-model="plan_way" class="w-select">
                    <el-option :value="0" :label="lang.auto_plan"></el-option>
                    <el-option :value="1" :label="lang.custom"></el-option>
                  </el-select>
                  <!-- 自定义vpc -->
                  <div class="custom" v-if="plan_way === 1">
                    <el-select v-model="vpc_ips.vpc1.value" @change="changeVpcIp">
                      <el-option v-for="item in vpc_ips.vpc1.select" :key="item" :label="item" :value="item">
                      </el-option>
                    </el-select>
                    <span>·</span>
                    <el-tooltip :content="vpc_ips.vpc1.tips" placement="top" effect="light">
                      <el-input-number :disabled="vpc_ips.vpc1.value === 192" v-model="vpc_ips.vpc2" :step="1"
                        :controls="false" :min="vpc_ips.min" :max="vpc_ips.max"></el-input-number>
                    </el-tooltip>
                    <span class="mr-5 ml-5">·</span>
                    <el-tooltip :content="vpc_ips.vpc3Tips" placement="top" effect="light"
                      :disabled="!vpc_ips.vpc3Tips">
                      <el-input-number :disabled="vpc_ips.vpc6.value === 16" @blur="changeVpc3" v-model="vpc_ips.vpc3"
                        :step="1" :controls="false" :min="0" :max="255">
                      </el-input-number>
                    </el-tooltip>
                    <span class="mr-5 ml-5">·</span>
                    <el-tooltip :content="vpc_ips.vpc4Tips" placement="top" effect="light"
                      :disabled="!vpc_ips.vpc4Tips">
                      <el-input-number :disabled="vpc_ips.vpc6.value < 25" @blur="changeVpc4" v-model="vpc_ips.vpc4"
                        :step="1" :controls="false" :min="0" :max="255">
                      </el-input-number>
                    </el-tooltip>
                    <span class="mr-5 ml-5">/</span>
                    <el-select v-model="vpc_ips.vpc6.value" style="width: 70px" @change="changeVpcMask">
                      <el-option v-for="item in vpc_ips.vpc6.select" :key="item" :label="item" :value="item">
                      </el-option>
                    </el-select>
                  </div>
                </div>

              </el-form-item>
              <!-- <el-form-item :label="lang.common_cloud_title3">
                  {{lang.mf_tip23}}
                </el-form-item> -->
            </template>
            <template v-if="isLogin">
              <!-- 安全组 -->
              <!-- <template v-if="!finance_login">
                <p class="com-tit">{{lang.security_group}}</p>
                <el-form-item :label="lang.security_group">
                  <el-radio-group v-model="groupName" @change="changeGroup">
                    <el-radio-button :label="lang.no_safe_group">
                      <img
                        :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/no-safe.svg`"
                        alt="" class="small-icon">
                      {{lang.no_safe_group}}
                    </el-radio-button>
                    <el-radio-button :label="lang.create_group">
                      <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/create.svg`"
                        alt="" class="small-icon">
                      {{lang.create_group}}
                    </el-radio-button>
                    <el-radio-button :label="lang.exist_group">
                      <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/exist.svg`"
                        alt="" class="small-icon">
                      {{lang.exist_group}}
                    </el-radio-button>
                  </el-radio-group>
                  <div class="group-box"
                    v-if="(baseConfig.nat_web_limit_enable || baseConfig.nat_acl_limit_enable)
                  && ( groupName === lang.no_safe_group && (params.network_type === 'vpc' || (params.network_type === 'normal' && baseConfig.type === 'lightHost')))">
                    <p class="s-tip">{{lang.no_safe_group_tip}}</p>
                  </div>
                  <div class="group-box" v-if="groupName !== lang.no_safe_group">
                    <div class="select" v-show="groupName === lang.create_group">
                      <el-checkbox v-model="item.check" v-for="(item,index) in groupSelect" :key="index"
                        :ref="`safe${index}`">
                        <el-tooltip placement="top" effect="light" trigger="hover" :disabled="item.disabled"
                          class="safe-tip" :content="item.name">
                          <span class="safe-item">{{item.name}}</span>
                        </el-tooltip>
                      </el-checkbox>
                    </div>
                    <el-form-item :label="lang.security_group" v-show="groupName === lang.exist_group">
                      <el-select v-model="params.security_group_id" filterable
                        :placeholder="`${lang.placeholder_pre2}${lang.security_group}`">
                        <el-option v-for="item in groupList" :key="item.id" :label="item.name" :value="item.id">
                        </el-option>
                      </el-select>
                      <i class="el-icon-loading" v-show="groupLoading"></i>
                      <i class="el-icon-refresh" class="refresh" @click="getGroup" v-show="!groupLoading"></i>
                    </el-form-item>
                  </div>
                  <p class="s-tip" v-if="groupName === lang.create_group">{{lang.mf_tip24}}</p>
                </el-form-item>
              </template> -->
              <!-- 其他配置 -->
              <p class="com-tit" id="ssh">{{lang.other_config}}</p>
              <el-form-item :label="lang.login_way">
                <el-radio-group v-model="login_way" @change="changeLogin">
                  <el-radio-button :label="lang.security_tab1"
                    v-if="baseConfig.support_ssh_key && ((imageName|| '').toUpperCase()).indexOf('WIN') === -1">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/ssh.svg`"
                      alt="" class="small-icon">
                    {{lang.security_tab1}}
                  </el-radio-button>
                  <el-radio-button :label="lang.set_pas">
                    <img
                      :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/password.svg`"
                      alt="" class="small-icon">
                    {{lang.set_pas}}
                  </el-radio-button>
                  <el-radio-button :label="lang.auto_create">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/auto.svg`"
                      alt="" class="small-icon">
                    {{lang.auto_create}}
                  </el-radio-button>
                </el-radio-group>
                <p class="s-tip" v-if="login_way === lang.auto_create">{{lang.mf_tip5}}</p>
                <div class="login-box" v-else>
                  <el-form-item :label="lang.login_name">
                    <el-input v-model="root_name" disabled></el-input>
                  </el-form-item>
                  <!-- ssh -->
                  <template v-if="login_way === lang.security_tab1">
                    <el-form-item :label="lang.ssh_key">
                      <el-select v-model="params.ssh_key_id" :placeholder="`${lang.placeholder_pre2}${lang.ssh_key}`">
                        <el-option v-for="item in sshList" :key="item.id" :label="item.name" :value="item.id">
                        </el-option>
                      </el-select>
                      <i class="el-icon-loading" v-show="sshLoading"></i>
                      <i class="el-icon-refresh" class="refresh" @click="getSsh" v-show="!sshLoading"></i>
                    </el-form-item>
                    <el-form-item v-show="showSsh" label=' ' class="empty-item">
                      <span class="error-tip">{{lang.placeholder_pre2}}{{lang.security_tab1}}</span>
                    </el-form-item>
                  </template>
                  <!-- 密码 -->
                  <template v-if="login_way === lang.set_pas">
                    <el-form-item :label="lang.login_password" prop="password">
                      <el-popover placement="right" trigger="click" popper-class="test-pup">
                        <div class="test-password">
                          <div class="t-item">
                            <span class="dot" v-show="!hasLen"></span>
                            <i class="el-icon-check" v-show="hasLen"></i>
                            {{lang.mf_val1}}
                          </div>
                          <div class="t-item">
                            <!-- 指定范围 -->
                            <span class="dot" v-show="hasAppoint"></span>
                            <i class="el-icon-check" v-show="!hasAppoint"></i>
                            {{lang.mf_val2}}
                          </div>
                          <div class="t-item">
                            <span class="dot" v-show="hasLine"></span>
                            <i class="el-icon-check" v-show="!hasLine"></i>
                            {{lang.mf_val3}}
                          </div>
                          <div class="t-item">
                            <span class="dot" v-show="!hasMust"></span>
                            <i class="el-icon-check" v-show="hasMust"></i>
                            {{lang.mf_val4}}
                          </div>
                        </div>
                        <el-input v-model="params.password" type="password" show-password @input="changeInput"
                          :placeholder="`${lang.placeholder_pre1}${lang.login_password}`" slot="reference">
                        </el-input>
                      </el-popover>
                      <span class="error-tip" v-show="showPas">{{lang.mf_tip20}}</span>
                    </el-form-item>
                    <el-form-item :label="lang.sure_password">
                      <el-input v-model="params.re_password" type="password" show-password
                        :placeholder="`${lang.placeholder_pre1}${lang.sure_password}`">
                      </el-input>
                      <span class="error-tip" v-show="showRepass">{{lang.mf_tip19}}</span>
                    </el-form-item>

                  </template>
                </div>
                <p class="s-tip jump-box" v-if="login_way === lang.security_tab1">{{lang.mf_tip17}}&nbsp;&nbsp;
                  <a href="security.htm?active=1" target="_blank" class="add-ssh">
                    {{lang.mf_tip18}}
                    <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/common/jump.svg" alt=""
                      class="icon">
                  </a>
                </p>
              </el-form-item>
              <el-form-item class="optional">
                <template slot="label">
                  {{lang.cloud_name}}
                  <el-tooltip class="item" effect="light" :content="lang.mf_tip14" placement="top">
                    <i class="el-icon-warning-outline"></i>
                  </el-tooltip>
                </template>
                <el-input v-model="params.notes" :placeholder="lang.mf_tip15"></el-input>
              </el-form-item>
              <el-form-item :label="lang.auto_renew" class="renew">
                <el-checkbox v-model="params.auto_renew">{{lang.open_auto_renew}}</el-checkbox>
              </el-form-item>
              <!-- 2023-5-23 新增 -->
              <el-form-item :label="lang.ip_mac_bind_enable" class="renew" v-if="baseConfig.ip_mac_bind_enable">
                <el-checkbox
                  v-model="params.ip_mac_bind_enable">{{lang.mf_allow}}{{lang.ip_mac_bind_enable}}</el-checkbox>
              </el-form-item>

              <template v-if="baseConfig.nat_acl_limit_enable">
                <el-form-item :label="lang.nat_acl_limit_enable" class="renew"
                  v-if="params.network_type === 'vpc' || (params.network_type === 'normal' && baseConfig.type === 'lightHost')">
                  <el-checkbox @change="changeNat" v-model="params.nat_acl_limit_enable"
                    :disabled="baseConfig.default_nat_acl === 1">{{lang.mf_support}}{{lang.nat_acl_limit_enable}}</el-checkbox>
                </el-form-item>
              </template>
              <template v-if="baseConfig.nat_web_limit_enable">
                <el-form-item :label="lang.nat_web_limit_enable" class="renew"
                  v-if="params.network_type === 'vpc' || (params.network_type === 'normal' && baseConfig.type === 'lightHost')">
                  <el-checkbox @change="changeNat" v-model="params.nat_web_limit_enable"
                    :disabled="baseConfig.default_nat_web === 1">{{lang.mf_support}}{{lang.nat_web_limit_enable}}</el-checkbox>
                </el-form-item>
              </template>

              <el-form-item :label="lang.ipv6_num_enable" class="renew"
                v-show="params.network_type === 'normal' && baseConfig.ipv6_num_enable">
                <el-checkbox v-model="params.ipv6_num_enable"
                  @change="changeIpv6">{{lang.mf_allow}}{{lang.ipv6_num_enable}}</el-checkbox>
              </el-form-item>
            </template>
            <custom-goods :id="id" label-width="130px" :self_defined_field.sync="self_defined_field"
              class="custom-config" ref="customGoodRef">
            </custom-goods>
            <!-- 付费周期 -->
            <el-form-item :label="lang.common_cloud_label8" class="duration-item">
              <div class="duration-box">
                <div class="item" :class="{active:params.duration_id === item.id }" v-for="item in cycleList"
                  :key="item.id" @click="chooseDuration(item.id)">
                  <p class="money">{{commonData.currency_prefix}}{{item.price}}</p>
                  <p class="cycle">{{item.name}}</p>
                  <span class="tip" v-if="item.discount">{{item.discount}}{{lang.mf_tip25}}</span>
                </div>
              </div>
            </el-form-item>
          </el-form>
        </div>
      </el-tab-pane>
      <!-- 自定义配置 -->
      <el-tab-pane :label="lang.custom_config" name="custom" :lazy="true"
        v-if="(isUpdate ? activeName === 'custom' :  true) && baseConfig.only_sale_recommend_config === 0">
        <div class="con">
          <p class="com-tit">{{lang.basic_config}}</p>
          <el-form :model="params" :rules="rules" ref="orderForm" label-position="left" label-width="130px"
            hide-required-asterisk>
            <!-- 资源包 -->
            <el-form-item :label="lang.resource_package" v-if="resourceList.length > 1">
              <el-radio-group v-model="ressourceName" @input="changeResource" class="area-radio">
                <el-radio-button :label="c.name" v-for="(c,cInd) in resourceList" :key="cInd">
                </el-radio-button>
              </el-radio-group>
            </el-form-item>
            <el-form-item :label="lang.common_cloud_label1">
              <el-tabs v-model="country" @tab-click="changeCountry" :class="{hide: dataList.length === 1}"
                class="area-tab">
                <el-tab-pane :label="item.name" :name="String(item.id)" v-for="item in dataList" :key="item.id">
                  <el-radio-group v-model="city" @input="changeCity($event,item.city)" class="area-radio">
                    <el-radio-button :label="c.name" v-for="(c,cInd) in item.city" :key="cInd">
                      <img :src="`/upload/common/country/${item.iso}.png`" alt="" class="country-icon">
                      {{c.name}}
                    </el-radio-button>
                  </el-radio-group>
                </el-tab-pane>
              </el-tabs>
              <!-- <p class="s-tip">{{lang.mf_tip1}}&nbsp;<span>{{lang.mf_tip2}}</span>{{lang.mf_tip3}}</p> -->
            </el-form-item>
            <!-- 可用区 -->
            <el-form-item :label="lang.usable_area">
              <el-radio-group v-model="area_name" @input="changeArea" class="area-radio">
                <el-radio-button :label="c.name" v-for="(c,cInd) in calcAreaList" :key="cInd">
                </el-radio-button>
              </el-radio-group>
              <!-- <p class="s-tip">{{lang.mf_tip10}}</p> -->
            </el-form-item>
            <p class="com-tit">{{lang.cloud_config}}</p>
            <!-- cpu -->
            <el-form-item label="CPU" class="short">
              <el-radio-group v-model="cpuName" @input="changeCpu">
                <el-radio-button :label="c.value + lang.mf_cores" v-for="(c,cInd) in cpuList" :key="cInd">
                </el-radio-button>
              </el-radio-group>
            </el-form-item>
            <!-- 内存 -->
            <el-form-item :label="lang.cloud_memery" v-if="memoryList.length > 0  && activeName ==='custom'"
              class="move short">
              <!-- 单选 -->
              <el-radio-group v-model="memoryName" v-if="memoryType" @input="changeMemory">
                <el-radio-button :label="c.value + baseConfig.memory_unit" v-for="(c,cInd) in calaMemoryList"
                  :key="cInd" :class="{'com-dis': c.disabled}">
                </el-radio-button>
              </el-radio-group>
              <!-- 拖动框 -->
              <template v-else>
                <el-tooltip effect="light" :content="lang.mf_range+ memoryTip" placement="top-end">
                  <el-slider v-model="params.memory" show-input :show-tooltip="false" :min="calaMemoryList[0] * 1"
                    :max="calaMemoryList[calaMemoryList.length -1] * 1" :show-stops="false" @change="changeMem">
                  </el-slider>
                </el-tooltip>
              </template>
              <span class="unit" v-if="!memoryType">{{baseConfig.memory_unit}}</span>
            </el-form-item>
            <el-form-item label=" " v-if="memoryList.length > 0 && memoryList[0].type !== 'radio'">
              <div class="marks">
                <!-- <span class="item" v-for="(item,index) in Object.keys(memMarks)">{{memMarks[item]}}GB</span> -->
                <span class="item">{{memoryList[0].min_value}}{{baseConfig.memory_unit}}</span>
                <span class="item">{{memoryList[memoryList.length -1 ].max_value}}{{baseConfig.memory_unit}}</span>
              </div>
            </el-form-item>
            <!-- gpu -->
            <el-form-item label="GPU" v-if="params.gpu_num">
              <!-- <el-radio-group v-model="params.gpu_num" @input="getCycleList">
                <el-radio-button :label="c.value" v-for="(c,cInd) in gpuList" :key="cInd">
                  {{c.value}}*{{gpu_name}}
                </el-radio-button>
              </el-radio-group> -->
              <el-select v-model="params.gpu_num" @change="getCycleList" style="width: 3.9rem;">
                <el-option v-for="item in gpuList" :key="item.value" :label="`${item.value}*${gpu_name}`"
                  :value="item.value">
                </el-option>
              </el-select>
            </el-form-item>

            <!-- 镜像 -->
            <el-form-item :label="lang.cloud_menu_5" class="image" id="image">
              <div class="image-box">
                <el-select v-model="curImageId" popper-class="image-select" @change="changeImage">
                  <template slot="prefix">
                    <img
                      :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/mf_cloud/${curImageIcon}.svg`"
                      alt="" class="image-icon" v-if="curImageIcon" />
                  </template>
                  <el-option v-for="item in imageList" :key="item.id" :label="item.name" :value="item.id">
                    <img
                      :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/mf_cloud/${item.icon}.svg`"
                      alt="" class="image-icon" />
                    <span>{{item.name}}</span>
                  </el-option>
                </el-select>
                <el-select v-model="params.image_id" popper-class="image-select" @change="getCycleList">
                  <el-option v-for="item in calcImageList" :key="item.id" :label="item.name" :value="item.id">
                  </el-option>
                </el-select>
              </div>
              <!-- <p class="s-tip" v-if="imageName">{{imageName && (imageName.indexOf('Win') !== -1 ? lang.mf_tip26 :
                lang.mf_tip27)}}
              </p> -->
              <span class="error-tip" v-show="showImage">{{lang.mf_tip6}}</span>
            </el-form-item>
            <!-- 存储 -->
            <el-form-item :label="lang.cloud_menu_3" v-if="activeName === 'custom'" class="store-item">
              <el-table :data="storeList" style="width: 100%" :row-class-name="tableRowClassName">
                <el-table-column prop="name" :label="lang.mf_purpose" width="140">
                </el-table-column>
                <!-- 磁盘类型 -->
                <el-table-column prop="disk_type" :label="lang.disk_type" width="250">
                  <template slot-scope="{row}">
                    <template v-if="row.index === 0">
                      <el-select v-model="params.system_disk.disk_type" :placeholder="lang.placeholder_pre2"
                        v-if="params.system_disk" :disabled="systemType.length === 1 && systemType[0].value === ''">
                        <el-option v-for="item in systemType" :key="item.value" :label="item.label" :value="item.value">
                        </el-option>
                      </el-select>
                    </template>
                    <template v-else>
                      <el-input :value="lang.mf_no" disabled v-if="row.index === 1 && baseConfig.free_disk_switch === 1"
                        class="dis-input"></el-input>
                      <template v-else>
                        <el-select v-model="params.data_disk[row.index - 1].disk_type"
                          :disabled="dataType.length === 1 && dataType[0].value === ''"
                          :placeholder="lang.placeholder_pre2" @change="changeDataDisk($event, row.index)"
                          v-if="params.data_disk && params.data_disk.length > 0">
                          <el-option v-for="item in dataType" :key="item.value" :label="item.label" :value="item.value">
                          </el-option>
                        </el-select>
                      </template>
                    </template>
                  </template>
                </el-table-column>
                <!-- 磁盘容量 -->
                <el-table-column prop="size" :label="lang.disk_size" min-width="190" label-class-name="disk-capacity">
                  <template slot-scope="{row}">
                    <template v-if="row.type==='radio'">
                      <template v-if="row.index === 0">
                        <!-- 系统盘 -->
                        <el-select v-model="params.system_disk.size" :placeholder="lang.placeholder_pre2"
                          v-if="params.system_disk" @change="getCycleList">
                          <el-option v-for="item in systemNum" :key="item.value" :label="item.label"
                            :value="item.value">
                          </el-option>
                        </el-select>
                      </template>
                      <!-- 数据盘 -->
                      <template v-else>
                        <template v-if="row.index === 1 && baseConfig.free_disk_switch === 1">
                          <el-input :value="baseConfig.free_disk_size" disabled class="dis-input">
                          </el-input><span style="margin-left: .05rem;">GB</span>
                        </template>

                        <template v-else>
                          <el-select v-model="params.data_disk[row.index - 1].size" :placeholder="lang.placeholder_pre2"
                            v-if="params.data_disk && params.data_disk.length > 0" @change="getCycleList">
                            <el-option v-for="item in dataNumObj[params.data_disk[row.index - 1].disk_type]"
                              :key="item.value" :label="item.label" :value="item.value">
                            </el-option>
                          </el-select>
                        </template>
                      </template>
                    </template>
                    <template v-else>
                      <!-- 存储是范围时 -->
                      <template v-if="row.index === 1 && baseConfig.free_disk_switch === 1">
                        <el-input :value="baseConfig.free_disk_size" disabled class="dis-input">
                        </el-input><span style="margin-left: .05rem;">GB</span>
                      </template>
                      <template v-else>
                        <template v-if="row.index === 0">
                          <el-tooltip effect="light"
                            :content="lang.mf_range + systemRangTip[params.system_disk.disk_type]" placement="top">
                            <el-input-number v-model="params.system_disk.size" :min="row.min" :max="row.max"
                              @change="(n,o)=>changeDataNum(n,o,row.index)">
                            </el-input-number>
                          </el-tooltip>
                        </template>
                        <template v-if="row.index !== 0 && params.data_disk.length > 0 ">
                          <el-tooltip effect="light"
                            :content="lang.mf_range + dataRangTip[params.data_disk[row.index - 1].disk_type]"
                            placement="top">
                            <el-input-number v-model="params.data_disk[row.index - 1].size" :min="row.min"
                              :max="row.max" @change="(n,o)=>changeDataNum(n,o,row.index)">
                            </el-input-number>
                          </el-tooltip>
                        </template>
                        GB
                      </template>
                    </template>
                  </template>
                </el-table-column>
                <!-- 数量 -->
                <el-table-column :label="lang.shoppingCar_goodsNums" min-width="160">
                  <template slot-scope="{row}">
                    <template v-if="row.index === 0">
                      <el-input v-model="row.num" disabled></el-input>
                    </template>
                    <template v-else>
                      <el-input :value="1" disabled
                        v-if="row.index === 1 && baseConfig.free_disk_switch === 1"></el-input>
                      <template v-else>
                        <el-input-number v-model="row.num" :min="1" :max="calcMax(row.index)"
                          @change="changeDataNum($event,row.index)">
                        </el-input-number>
                      </template>
                    </template>
                  </template>
                </el-table-column>
                <el-table-column :label="lang.file_opt" width="120" fixed="right">
                  <template slot-scope="{row}">
                    <div class="data-opt">
                      <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/delete.png"
                        alt="" v-if="baseConfig.free_disk_switch ?  row.index + 1 > 2 :  row.index + 1 > 1 "
                        @click="delDataDisk(row.index)">
                      <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/add.png"
                        alt="" @click="addDataDisk"
                        v-if="row.index + 1 === storeList.length && calcAllNum <= baseConfig.disk_limit_num">
                    </div>
                  </template>
                </el-table-column>
              </el-table>
              <!-- <div class="store" v-if="calcAllNum < 17">
                {{lang.mf_tip11}}<span class="txt num">{{17 - calcAllNum}}</span>{{lang.mf_tip12}}
              </div> -->
            </el-form-item>
            <!-- 网络配置 -->
            <p class="com-tit">{{lang.net_config}}</p>
            <el-form-item :label="lang.network_type">
              <el-radio-group v-model="netName" @change="changeNet" class="area-radio">
                <el-radio-button :label="lang.mf_normal" v-if="baseConfig.support_normal_network">
                  <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/classical.svg`"
                    alt="" class="small-icon">
                  {{lang.mf_normal}}
                </el-radio-button>
                <el-radio-button :label="lang.mf_vpc" v-if="baseConfig.support_vpc_network">
                  <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/vpc.svg`"
                    alt="" class="small-icon">
                  {{lang.mf_vpc}}
                </el-radio-button>
              </el-radio-group>
            </el-form-item>
            <template v-if="params.network_type === 'vpc'">
              <el-form-item :label="lang.cloud_menu_2"
                v-if="params.nat_web_limit_enable || params.nat_acl_limit_enable">
                <span style="display: inline-block;line-height: .48rem;">172.16.0.0/12</span>
              </el-form-item>
              <el-form-item :label="lang.cloud_menu_2" v-else>
                <div class="choose-net">
                  <el-select v-model="params.vpc.id" filterable class="w-select"
                    :placeholder="`${lang.placeholder_pre2}${lang.cloud_menu_2}`">
                    <el-option value="" :label="lang.create_network"></el-option>
                    <el-option v-for="item in vpcList" :key="item.id" :label="item.name" :value="item.id">
                    </el-option>
                  </el-select>
                  <i class="el-icon-loading" v-show="vpcLoading"></i>
                  <i class="el-icon-refresh" class="refresh" @click="getVpcList" v-show="!vpcLoading"></i>
                </div>
                <div class="vpc" v-if="params.vpc.id === ''">
                  <el-select v-model="plan_way" class="w-select">
                    <el-option :value="0" :label="lang.auto_plan"></el-option>
                    <el-option :value="1" :label="lang.custom"></el-option>
                  </el-select>
                  <!-- 自定义vpc -->
                  <div class="custom" v-if="plan_way === 1">
                    <el-select v-model="vpc_ips.vpc1.value" @change="changeVpcIp">
                      <el-option v-for="item in vpc_ips.vpc1.select" :key="item" :label="item" :value="item">
                      </el-option>
                    </el-select>
                    <span>·</span>
                    <el-tooltip :content="vpc_ips.vpc1.tips" placement="top" effect="light">
                      <el-input-number :disabled="vpc_ips.vpc1.value === 192" v-model="vpc_ips.vpc2" :step="1"
                        :controls="false" :min="vpc_ips.min" :max="vpc_ips.max"></el-input-number>
                    </el-tooltip>
                    <span class="mr-5 ml-5">·</span>
                    <el-tooltip :content="vpc_ips.vpc3Tips" placement="top" effect="light"
                      :disabled="!vpc_ips.vpc3Tips">
                      <el-input-number :disabled="vpc_ips.vpc6.value === 16" @blur="changeVpc3" v-model="vpc_ips.vpc3"
                        :step="1" :controls="false" :min="0" :max="255">
                      </el-input-number>
                    </el-tooltip>
                    <span class="mr-5 ml-5">·</span>
                    <el-tooltip :content="vpc_ips.vpc4Tips" placement="top" effect="light"
                      :disabled="!vpc_ips.vpc4Tips">
                      <el-input-number :disabled="vpc_ips.vpc6.value < 25" @blur="changeVpc4" v-model="vpc_ips.vpc4"
                        :step="1" :controls="false" :min="0" :max="255">
                      </el-input-number>
                    </el-tooltip>
                    <span class="mr-5 ml-5">/</span>
                    <el-select v-model="vpc_ips.vpc6.value" style="width: 70px" @change="changeVpcMask">
                      <el-option v-for="item in vpc_ips.vpc6.select" :key="item" :label="item" :value="item">
                      </el-option>
                    </el-select>
                  </div>
                </div>

              </el-form-item>
              <el-form-item :label="lang.common_cloud_title3"
                v-if="!params.nat_acl_limit_enable && !params.nat_web_limit_enable">
                <span class="public-ip">{{lang.mf_tip23}}</span>
              </el-form-item>
            </template>
            <!-- 线路 -->
            <el-form-item :label="lang.mf_line">
              <el-radio-group v-model="lineName" @input="changeLine" class="area-radio">
                <el-radio-button :label="c.name" v-for="(c,cInd) in lineList" :key="cInd">
                </el-radio-button>
              </el-radio-group>
            </el-form-item>
            <!-- 带宽 -->
            <el-form-item :label="lang.mf_bw" v-if="lineDetail.bill_type === 'bw' && lineDetail.bw.length > 0"
              class="short">
              <!-- 单选 -->
              <el-radio-group v-model="bwName" v-if="lineDetail.bw[0].type === 'radio'" @input="changeBw">
                <el-radio-button :label="c.value + 'M'" v-for="(c,cInd) in lineDetail.bw" :key="cInd">
                </el-radio-button>
              </el-radio-group>
              <!-- 拖动框 -->
              <el-tooltip effect="light" v-else :content="lang.mf_range + bwTip" placement="top-end">
                <el-slider v-model="params.bw" show-input :step="1" :min="lineDetail.bw[0].min_value"
                  :max="lineDetail.bw[lineDetail.bw.length - 1].max_value" @change="changeBwNum">
                </el-slider>
              </el-tooltip>
            </el-form-item>
            <el-form-item label=" " v-if="lineDetail.bw && lineDetail.bw[0].type !== 'radio'">
              <div class="marks">
                <!-- <span class="item" v-for="(item,index) in Object.keys(bwMarks)">{{bwMarks[item]}}Mbps</span> -->
                <span class="item">{{lineDetail.bw[0].min_value}}M</span>
                <span class="item">{{lineDetail.bw[lineDetail.bw.length -1 ].max_value}}M</span>
              </div>
            </el-form-item>
            <!-- 流量 -->
            <el-form-item :label="lang.mf_flow" v-if="lineDetail.bill_type === 'flow' && lineDetail.flow.length > 0"
              class="short">
              <el-radio-group v-model="flowName" @input="changeFlow">
                <el-radio-button :label="c.value > 0 ? (c.value + 'G') : lang.mf_tip28"
                  v-for="(c,cInd) in lineDetail.flow" :key="cInd">
                </el-radio-button>
              </el-radio-group>
            </el-form-item>
            <!-- 防御 -->
            <el-form-item :label="lang.mf_defense" v-if="lineDetail.defence && lineDetail.defence.length >0"
              class="short">
              <el-radio-group v-model="defenseName">
                <el-radio-button :label="c.value == 0 ? lang.no_defense : (c.value + 'G')"
                  v-for="(c,cInd) in lineDetail.defence" :key="cInd" @click.native="chooseDefence($event,c)">
                </el-radio-button>
              </el-radio-group>
            </el-form-item>

            <template v-if="isLogin">
              <!-- 安全组 -->
              <!-- <p class="com-tit">{{lang.security_group}}</p>
              <el-form-item :label="lang.common_cloud_title26">
                <el-radio-group v-model="groupName" @change="changeGroup" class="area-radio">
                  <el-radio-button :label="lang.no_safe_group">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/no-safe.svg`"
                      alt="" class="small-icon">
                    {{lang.no_safe_group}}
                  </el-radio-button>
                  <el-radio-button :label="lang.create_group">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/create.svg`"
                      alt="" class="small-icon">
                    {{lang.create_group}}
                  </el-radio-button>
                  <el-radio-button :label="lang.exist_group">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/exist.svg`"
                      alt="" class="small-icon">
                    {{lang.exist_group}}
                  </el-radio-button>
                </el-radio-group>
                <div class="group-box"
                  v-if="(baseConfig.nat_web_limit_enable || baseConfig.nat_acl_limit_enable)
              && ( groupName === lang.no_safe_group && (params.network_type === 'vpc' || (params.network_type === 'normal' && baseConfig.type === 'lightHost')))">
                  <p class="s-tip">{{lang.no_safe_group_tip}}</p>
                </div>
                <div class="group-box" v-if="groupName !== lang.no_safe_group">

                  <div class="select" v-show="groupName === lang.create_group">
                    <el-checkbox v-model="item.check" v-for="(item,index) in groupSelect" :key="index"
                      :ref="`safe${index}`">
                      <el-tooltip placement="top" effect="light" trigger="hover" :disabled="item.disabled"
                        class="safe-tip" :content="item.name">
                        <span class="safe-item">{{item.name}}</span>
                      </el-tooltip>
                    </el-checkbox>
                  </div>
                  <el-form-item :label="lang.common_cloud_title26" v-show="groupName === lang.exist_group">
                    <el-select v-model="params.security_group_id" filterable
                      :placeholder="`${lang.placeholder_pre2}${lang.common_cloud_title26}`">
                      <el-option v-for="item in groupList" :key="item.id" :label="item.name" :value="item.id">
                      </el-option>
                    </el-select>
                    <i class="el-icon-loading" v-show="groupLoading"></i>
                    <i class="el-icon-refresh" class="refresh" @click="getGroup" v-show="!groupLoading"></i>
                  </el-form-item>
                </div>
                <p class="s-tip" v-if="groupName === lang.create_group">{{lang.mf_tip24}}</p>
              </el-form-item> -->
              <!-- 其他配置 -->
              <p class="com-tit" id="ssh">{{lang.other_config}}</p>
              <el-form-item :label="lang.login_way">
                <el-radio-group v-model="login_way" @change="changeLogin" class="area-radio">
                  <el-radio-button :label="lang.security_tab1"
                    v-if="baseConfig.support_ssh_key && ((imageName|| '').toUpperCase()).indexOf('WIN') === -1">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/ssh.svg`"
                      alt="" class="small-icon">
                    {{lang.security_tab1}}
                  </el-radio-button>
                  <el-radio-button :label="lang.set_pas">
                    <img
                      :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/password.svg`"
                      alt="" class="small-icon">
                    {{lang.set_pas}}
                  </el-radio-button>
                  <el-radio-button :label="lang.auto_create">
                    <img :src="`/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/auto.svg`"
                      alt="" class="small-icon">
                    {{lang.auto_create}}
                  </el-radio-button>
                </el-radio-group>
                <p class="s-tip" v-if="login_way === lang.auto_create">{{lang.mf_tip5}}</p>
                <div class="login-box" v-else>
                  <el-form-item :label="lang.login_name" label-position="top">
                    <el-input v-model="root_name" disabled></el-input>
                  </el-form-item>
                  <!-- ssh -->
                  <template v-if="login_way === lang.security_tab1">
                    <el-form-item :label="lang.ssh_key" label-position="top">
                      <el-select v-model="params.ssh_key_id" :placeholder="`${lang.placeholder_pre2}${lang.ssh_key}`">
                        <el-option v-for="item in sshList" :key="item.id" :label="item.name" :value="item.id">
                        </el-option>
                      </el-select>
                      <i class="el-icon-loading opt-icon" v-show="sshLoading"></i>
                      <i class="el-icon-refresh opt-icon" @click="getSsh" v-show="!sshLoading"></i>
                    </el-form-item>
                    <el-form-item v-show="showSsh" label=' ' class="empty-item">
                      <span class="error-tip">{{lang.placeholder_pre2}}{{lang.security_tab1}}</span>
                    </el-form-item>
                  </template>
                  <!-- 密码 -->
                  <template v-if="login_way === lang.set_pas">
                    <el-form-item :label="lang.login_password" prop="password">
                      <el-popover placement="right" trigger="click" popper-class="test-pup">
                        <div class="test-password">
                          <div class="t-item">
                            <span class="dot" v-show="!hasLen"></span>
                            <i class="el-icon-check" v-show="hasLen"></i>
                            {{lang.mf_val1}}
                          </div>
                          <div class="t-item">
                            <!-- 指定范围 -->
                            <span class="dot" v-show="hasAppoint"></span>
                            <i class="el-icon-check" v-show="!hasAppoint"></i>
                            {{lang.mf_val2}}
                          </div>
                          <div class="t-item">
                            <span class="dot" v-show="hasLine"></span>
                            <i class="el-icon-check" v-show="!hasLine"></i>
                            {{lang.mf_val3}}
                          </div>
                          <div class="t-item">
                            <span class="dot" v-show="!hasMust"></span>
                            <i class="el-icon-check" v-show="hasMust"></i>
                            {{lang.mf_val4}}
                          </div>
                        </div>
                        <el-input v-model="params.password" type="password" show-password @input="changeInput"
                          :placeholder="`${lang.placeholder_pre1}${lang.login_password}`" slot="reference">
                        </el-input>
                      </el-popover>
                      <span class="error-tip" v-show="showPas">{{lang.mf_tip20}}</span>
                    </el-form-item>
                    <el-form-item :label="lang.sure_password">
                      <el-input v-model="params.re_password" type="password" show-password
                        :placeholder="`${lang.placeholder_pre1}${lang.sure_password}`">
                      </el-input>
                      <span class="error-tip" v-show="showRepass">{{lang.mf_tip19}}</span>
                    </el-form-item>

                  </template>
                </div>
                <p class="s-tip jump-box" v-if="login_way === lang.security_tab1">{{lang.mf_tip17}}&nbsp;&nbsp;
                  <a href="security.htm?active=1" target="_blank" class="add-ssh">
                    {{lang.mf_tip18}}
                    <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/common/jump.svg" alt=""
                      class="icon">
                  </a>
                </p>
              </el-form-item>
              <el-form-item class="optional">
                <template slot="label">
                  {{lang.cloud_name}}
                  <el-tooltip class="item" effect="light" :content="lang.mf_tip14" placement="top"
                    popper-class="tip-pup">
                    <i class="el-icon-warning-outline"></i>
                  </el-tooltip>
                </template>
                <el-input v-model="params.notes" :placeholder="lang.mf_tip15"></el-input>
              </el-form-item>

              <el-form-item :label="lang.auto_renew" class="renew">
                <el-checkbox v-model="params.auto_renew">{{lang.open_auto_renew}}</el-checkbox>
              </el-form-item>
              <!-- 2023-5-23 新增 -->
              <el-form-item :label="lang.ip_mac_bind_enable" class="renew" v-if="baseConfig.ip_mac_bind_enable">
                <el-checkbox
                  v-model="params.ip_mac_bind_enable">{{lang.mf_allow}}{{lang.ip_mac_bind_enable}}</el-checkbox>
              </el-form-item>
              <div v-show="params.network_type === 'vpc'">
                <el-form-item :label="lang.nat_acl_limit_enable" class="renew" v-if="baseConfig.nat_acl_limit_enable">
                  <el-checkbox @change="changeNat" v-model="params.nat_acl_limit_enable"
                    :disabled="baseConfig.default_nat_acl === 1">{{lang.mf_support}}{{lang.nat_acl_limit_enable}}</el-checkbox>
                </el-form-item>
                <el-form-item :label="lang.nat_web_limit_enable" class="renew" v-if="baseConfig.nat_web_limit_enable">
                  <el-checkbox @change="changeNat" v-model="params.nat_web_limit_enable"
                    :disabled="baseConfig.default_nat_web === 1">{{lang.mf_support}}{{lang.nat_web_limit_enable}}</el-checkbox>
                </el-form-item>
              </div>
              <el-form-item :label="lang.ipv6_num_enable" class="renew"
                v-show="params.network_type === 'normal' && baseConfig.ipv6_num_enable">
                <el-checkbox v-model="params.ipv6_num_enable"
                  @change="changeIpv6">{{lang.mf_allow}}{{lang.ipv6_num_enable}}</el-checkbox>
              </el-form-item>
            </template>
            <custom-goods :id="id" label-width="130px" :self_defined_field.sync="self_defined_field"
              class="custom-config" ref="customGoodRef">
            </custom-goods>
            <!-- 付费周期 -->
            <el-form-item :label="lang.common_cloud_label8" class="duration-item">
              <div class="duration-box">
                <div class="item" :class="{active:params.duration_id === item.id }" v-for="item in cycleList"
                  :key="item.id" @click="chooseDuration(item.id)">
                  <p class="money">{{commonData.currency_prefix}}{{item.price}}</p>
                  <p class="cycle">{{item.name}}</p>
                  <span class="tip" v-if="item.discount">{{item.discount}}{{lang.mf_tip25}}</span>
                </div>
              </div>
            </el-form-item>
          </el-form>
          <div class="go-top" @click="goTop" v-show="isShowTop">
            <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/cloudDetail/top.png" alt="">
          </div>
        </div>
      </el-tab-pane>
    </el-tabs>
    <!-- 配置预览 -->
    <div class="order-right" :class="{'has-scroll': hasScroll, 'top-scroll': hasTopScroll}">
      <div class="right-main">
        <div class="config-top">
          <div class="right-title">{{lang.product_preview}}</div>
          <div class="info">
            <p class="des">
              <span>{{tit}}</span>
              <span v-if="base_price*1">{{commonData.currency_prefix}}{{ Number(base_price).toFixed(2) |
                filterMoney}}</span>
            </p>
            <p class="des" v-for="(item,index) in preview" :key="index">
              <span class="name">{{item.name}}</span>
              <span class="value" :title="item.value">{{item.value}}</span>
              <span class="price">{{commonData.currency_prefix}}{{item.price | filterMoney}}</span>
            </p>
          </div>
        </div>
        <div class="config-mobile">
          <el-collapse v-model="activeNames">
            <el-collapse-item :title="lang.product_preview" name="1">
              <div class="info">
                <p class="des">
                  <span>{{tit}}</span>
                  <span v-if="base_price*1">{{commonData.currency_prefix}}{{ Number(base_price).toFixed(2) |
                    filterMoney}}</span>
                </p>
                <p class="des" v-for="(item,index) in preview" :key="index">
                  <span class="name">{{item.name}}</span>
                  <span class="value">{{item.value}}</span>
                  <span class="price">{{commonData.currency_prefix}}{{item.price | filterMoney}}</span>
                </p>
              </div>
            </el-collapse-item>
          </el-collapse>
        </div>
        <div class="subtotal">
          <div class="label">{{lang.shoppingCar_goodsNums}}</div>
          <div class="value del-add">
            <el-input-number v-model="qty" :min="1" :max="999" @change="changQty"></el-input-number>
          </div>
        </div>
      </div>

      <div class="f-box" v-if="isShowBtn">
        <!-- 合计 优惠码 购买按钮 -->
        <div class="order-right-footer">
          <div class="bot-price footer-total">
            <div class="left">{{lang.shoppingCar_tip_text3}}：</div>
            <div class="right" v-loading="loadingPrice">
              <div class="new">
                {{commonData.currency_prefix}}<span>{{calcTotalPrice}}</span>
                <el-popover placement="top" trigger="hover" v-if="calcTotalPrice *1 !== totalPrice * 1"
                  popper-class="level-pup">
                  <div class="show-config-list">
                    <p v-if="levelNum > 0">{{lang.shoppingCar_tip_text2}}：{{commonData.currency_prefix}} {{ (levelNum *
                      qty).toFixed(2) | filterMoney }}</p>
                    <p v-if="discount > 0">{{lang.shoppingCar_tip_text4}}：{{commonData.currency_prefix}} {{ discount |
                      filterMoney }}</p>
                    <p v-if="eventData.discount > 0">{{lang.goods_text4}}：{{commonData.currency_prefix}} {{
                      eventData.discount | filterMoney }}
                    </p>
                  </div>
                  <i class="el-icon-warning-outline total-icon" slot="reference"></i>
                </el-popover>
              </div>
              <div class="old">
                <div class="show" v-if="calcTotalPrice *1 !== totalPrice * 1">
                  {{commonData.currency_prefix}}{{(totalPrice * 1).toFixed(2)}}
                </div>
                <!-- 优惠码 -->
                <!-- 未使用 -->
                <el-popover placement="top" trigger="click" popper-class="discount-pup" v-model="dis_visible"
                  v-if="!discount">
                  <div class="discount">
                    <img src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/img/common/close_icon.png"
                      alt="" class="close" @click="dis_visible = !dis_visible">
                    <div class="code">
                      <el-input v-model="promo.promo_code"
                        :placeholder="`${lang.placeholder_pre1}${lang.cloud_code}`"></el-input>
                      <button class="sure" @click="useDiscount">{{lang.referral_btn6}}</button>
                    </div>
                    <span class="error-tip" v-show="showErr">{{lang.mf_tip8}}</span>
                  </div>
                  <p class="use" slot="reference" v-show="hasDiscount">{{lang.use_discount}}</p>
                </el-popover>
                <!-- 已使用 -->
                <div class="used" v-else>
                  <span>{{promo.promo_code}}</span>
                  <i class="el-icon-circle-close" @click="canclePromo"></i>
                </div>
                <!-- 活动插件 -->
                <event-code v-if="isShowFull" :product_id='id' :qty="qty" :amount="totalPrice"
                  :billing_cycle_time="duration" @change="eventChange">
                </event-code>
              </div>
            </div>
          </div>
        </div>

        <!-- 需读 -->
        <!-- 购买按钮 -->
        <div class="f-btn ifram-hiden">
          <template v-if="isUpdate">
            <el-button class="buy-btn" type="primary" @click="handlerCart" :loading="submitLoading"
              style="width:100%">{{lang.product_sure_check}}</el-button>
          </template>
          <template v-else>
            <el-button class="cart" type="primary" plain @click="handlerCart" :loading="submitLoading"
              style="width:100%">{{lang.product_add_cart}}</el-button>
            <el-button class="buy-btn" type="primary" @click="submitOrder" :loading="submitLoading"
              style="width:100%">{{lang.product_buy_now}}</el-button>
          </template>
        </div>
      </div>
    </div>
  </div>
  <el-dialog title="" :visible.sync="cartDialog" custom-class="cartDialog" :show-close="false">
    <span class="tit">{{lang.product_tip}}</span>
    <span slot="footer" class="dialog-footer">
      <el-button type="primary" @click="cartDialog = false">{{lang.product_continue}}</el-button>
      <el-button @click="goToCart">{{lang.product_settlement}}</el-button>
    </span>
  </el-dialog>
</div>
<!-- =======页面独有======= -->
<script src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/api/mf_cloud.js"></script>
<script src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/lang/index.js"></script>
<script src="/plugins/reserver/mf_cloud/template/clientarea/pc/overseas/js/goods.js"></script>
